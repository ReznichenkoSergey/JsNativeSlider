let slideItems = document.querySelectorAll(".slide"),
  indContainer = document.querySelector(".indicators"),
  indItems = document.querySelectorAll(".indicator"),
  currentSlide = 0,
  carouselInterval = 2e3;
const SPACE = " ",
  LEFT_ARROW = "ArrowLeft",
  RIGHT_ARROW = "ArrowRight",
  FA_PAUSE = '<i class="far fa-pause-circle"></i>',
  FA_PLAY = '<i class="far fa-play-circle"></i>';
(indContainer.style.display = "flex"),
  (document.querySelector(".controls").style.display = "block");
let gotoNSlide = (e) => {
    slideItems[currentSlide].classList.toggle("active"),
      indItems[currentSlide].classList.toggle("active"),
      (currentSlide = (e + slideItems.length) % slideItems.length),
      slideItems[currentSlide].classList.toggle("active"),
      indItems[currentSlide].classList.toggle("active");
  },
  gotoNextSlide = () => gotoNSlide(currentSlide + 1),
  gotoPrevSlide = () => gotoNSlide(currentSlide - 1),
  playbackStatus = !0,
  pausePlayBtn = document.querySelector("#pause-play-btn"),
  nextBtn = document.querySelector("#next-btn"),
  prevBtn = document.querySelector("#prev-btn"),
  slideInterval = setInterval(gotoNextSlide, carouselInterval),
  pauseSlideShow = () => {
    playbackStatus &&
      ((pausePlayBtn.innerHTML = FA_PLAY),
      (playbackStatus = !playbackStatus),
      clearInterval(slideInterval));
  },
  playSlideShow = () => {
    (pausePlayBtn.innerHTML = FA_PAUSE),
      (playbackStatus = !playbackStatus),
      (slideInterval = setInterval(gotoNextSlide, carouselInterval));
  },
  clickPausePlayBtn = () =>
    playbackStatus ? pauseSlideShow() : playSlideShow(),
  clickNextBtn = () => {
    pauseSlideShow(), gotoNextSlide();
  },
  clickPrevBtn = () => {
    pauseSlideShow(), gotoPrevSlide();
  };
pausePlayBtn.addEventListener("click", clickPausePlayBtn),
  nextBtn.addEventListener("click", clickNextBtn),
  prevBtn.addEventListener("click", clickPrevBtn);
let clickIndicatorBtn = (e) => {
  let t = e.target;
  t.classList.contains("indicator") &&
    (pauseSlideShow(), gotoNSlide(+t.getAttribute("data-slide-to")));
};
indContainer.addEventListener("click", clickIndicatorBtn);
let pressKeyControl = (e) => {
  e.key === LEFT_ARROW && clickPrevBtn(),
    e.key === RIGHT_ARROW && clickNextBtn(),
    " " === e.key && clickPausePlayBtn();
};
document.addEventListener("keydown", pressKeyControl);
let carousel = document.querySelector(".carousel"),
  swipeStartX = null,
  swipeEndX = null,
  swipeStart = (e) => {
    swipeStartX = e.changedTouches[0].pageX;
  },
  swipeEnd = (e) => {
    (swipeEndX = e.changedTouches[0].pageX),
      swipeStartX - swipeEndX > 100 && clickPrevBtn(),
      swipeStartX - swipeEndX < -100 && clickNextBtn();
  };
carousel.addEventListener("touchstart", swipeStart),
  carousel.addEventListener("touchend", swipeEnd);
